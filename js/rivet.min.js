/*!
 * rivet-uits - @version 1.4.0

 * Copyright (C) 2018 The Trustees of Indiana University
 * SPDX-License-Identifier: BSD-3-Clause
 */

Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null}),function(){if("function"==typeof window.CustomEvent)return;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}e.prototype=window.Event.prototype,window.CustomEvent=e}();var fireCustomEvent=function(e,t,r){var o=new CustomEvent(r,{bubbles:!0,detail:{name:function(){return e.getAttribute(t)}}});e.dispatchEvent(o)},Alert=function(){"use strict";function t(e){void 0===e&&(e=document),document.removeEventListener("click",r,!1)}var r=function(e){var t=e.target.closest("[data-alert-close], .rvt-alert__dismiss");t&&o(t.parentNode)};function o(e,t){if("object"==typeof e&&1===e.nodeType){var r=e;if((e=r.getAttribute("id"))||(e=r.getAttribute("aria-labelledby")),!e)throw new Error("Please proved an id attribute for the alert you want to dismiss.")}var o=document.querySelector('[aria-labelledby="'+e+'"]');if(o||(o=document.getElementById(e)),!o)throw new Error("Could not find an alert with the id of "+e+" to dismiss.");o.parentNode.removeChild(o),t&&"function"==typeof t&&t()}return{init:function(e){void 0===e&&(e=document),t(e),document.addEventListener("click",r,!1)},destroy:t,dismiss:o}}(),Drawer=function(){"use strict";var l,c,s={up:38,down:40,tab:9,escape:27},o='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]',f="data-drawer-toggle",v="["+f+"]";function b(e){var t={};t.toggle=document.querySelector("["+f+'="'+e+'"]'),t.menu=document.getElementById(e);var r=Array.prototype.slice.call(t.menu.querySelectorAll(o));return t.focusables=r,t.firstFocusable=r[0],t.lastFocusable=r[r.length-1],t}function m(e,t){var r=b(e);l=e,c=r.toggle,r.toggle.setAttribute("aria-expanded","true"),r.menu.setAttribute("aria-hidden","false"),fireCustomEvent(c,f,"drawerOpen"),t&&"function"==typeof t&&t()}function g(e,t){var r=document.querySelector('[data-drawer-toggle="'+e+'"]'),o=document.getElementById(e);r.setAttribute("aria-expanded","false"),o.setAttribute("aria-hidden","true"),fireCustomEvent(r,f,"drawerClose"),t&&"function"==typeof t&&t()}function t(e){if(null!==e.target.closest(".rvt-drawer")?e.clickedInDrawer=!0:e.clickedInDrawer=!1,e.clickedInDrawer){if(e.target.closest("[data-subnav-toggle]")){var t=e.target.closest("[data-subnav-toggle]").getAttribute("data-subnav-toggle");r=t,o=document.querySelector('[data-subnav-toggle="'+r+'"]'),n=document.getElementById(r),a="true"===o.getAttribute("aria-expanded")||!1,o.setAttribute("aria-expanded",!a),n.setAttribute("aria-hidden",a)}null!==e.target.closest("[data-close-drawer], .rvt-drawer__bottom-close")&&(g(l),c.focus())}else{var r,o,n,a,i=e.target.closest(v);if(i&&"true"!==i.getAttribute("aria-expanded"))m(i.getAttribute(f));else{if(!l)return;g(l)}}}function r(e){switch(e.keyCode){case s.down:var t=e.target.closest(v);if(t&&null!==t){var r=t.getAttribute(f);return void("true"===(i=b(r)).toggle.getAttribute("aria-expanded")?i.firstFocusable.focus():m(r))}if(e.target.closest("#"+l)){var o=(i=b(l)).focusables.filter(function(e){return 0<e.clientHeight});i.visibleFocusables=o;for(var n=0;n<i.visibleFocusables.length;n++)e.target===i.visibleFocusables[n]&&(u=n);var a=i.visibleFocusables[u+1];if(!a)return void i.firstFocusable.focus();a.focus()}break;case s.up:if(e.target.closest("#"+l)){var i,u;o=(i=b(l)).focusables.filter(function(e){return 0<e.clientHeight});i.visibleFocusables=o;for(n=0;n<i.visibleFocusables.length;n++)e.target===i.visibleFocusables[n]&&(u=n);var d=i.visibleFocusables[u-1];if(!d)return void i.lastFocusable.focus();d.focus()}break;case s.escape:l&&g(l),c&&null!==c&&c.focus(),c=l=null}}function n(e){void 0===e&&(e=document),document.removeEventListener("click",t,!1),document.removeEventListener("keydown",r,!1)}return{init:function(e){void 0===e&&(e=document),n(e),document.addEventListener("click",t,!1),document.addEventListener("keydown",r,!1)},destroy:n,open:m,close:g,toggle:function(e,t,r){var o=e.getAttribute(f);"true"===e.getAttribute("aria-expanded")?g(o):m(o)}}}(),Dropdown=function(){"use strict";var l,c,s={up:38,down:40,tab:9,escape:27},o='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]',f="data-dropdown-toggle";function v(e,t){if(!e)throw new Error("You must provide a unique id for the menu you're trying to open.");c&&b(c);var r="["+f+'="'+(c=e)+'"]',o=document.querySelector(r);o&&null!==o&&(o.setAttribute("aria-expanded","true"),l=o);var n=document.getElementById(e);if(!n)throw new Error('There was no menu found with an id attribute that matches the "data-dropdown-toggle" attribute on the dropdown toggle.');n.setAttribute("aria-hidden","false"),fireCustomEvent(o,f,"dropdownOpen"),t&&"function"==typeof t&&t()}function b(e,t){if(!e)throw new Error("You must provide a unique id for the menu you're trying to close.");var r=document.querySelector("["+f+'="'+e+'"]');r&&void 0!==r&&r.setAttribute("aria-expanded","false");var o=document.getElementById(e);if(!o){if(e)return;throw new Error('There was no menu found with an id attribute that matches the "data-dropdown-toggle" attribute on the dropdown toggle.')}o.setAttribute("aria-hidden","true"),fireCustomEvent(r,f,"dropdownClose"),t&&"function"==typeof t&&t()}function m(e){var t={},r=Array.prototype.slice.call(e.querySelectorAll(o));return t.all=r,t.first=r[0],t.last=r[r.length-1],t}function t(e){var t=e.target.closest("["+f+"]"),r=e.target.closest("#"+c);if(r&&null!==r&&(e.clickedWithinMenu=!0),t&&"true"!==t.getAttribute("aria-expanded")){v(t.getAttribute(f))}else{if(!c)return;e.clickedWithinMenu||b(c)}}function r(e){switch(e.keyCode){case s.down:var t=e.target.closest("["+f+"]");if(t&&null!==t){var r=t.getAttribute(f),o=document.getElementById(r);if("true"===t.getAttribute("aria-expanded"))(n=m(o)).first.focus();v(r)}if(null!==e.target.closest("#"+c)){for(var n=m(e.target.closest("#"+c)),a=0;a<n.all.length;a++)e.target==n.all[a]&&(d=a);var i=n.all[d+1];if(!i)return void n.first.focus();i.focus()}break;case s.up:if(null!==e.target.closest("#"+c)){for(n=m(e.target.closest("#"+c)),a=0;a<n.all.length;a++)e.target==n.all[a]&&(d=a);var u=n.all[d-1];if(!u&&void 0!==n.last)return void n.last.focus();u.focus()}break;case s.escape:c&&b(c),l&&null!==l&&l.focus(),l=c=null;break;case s.tab:if(null!==e.target.closest("#"+c)){var d;for(n=m(e.target.closest("#"+c)),a=0;a<n.all.length;a++)e.target==n.all[a]&&(d=a);if(document.activeElement==n.last&&!e.shiftKey)return void b(c)}}}function n(e){void 0===e&&(e=document),e.removeEventListener("click",t,!1),e.removeEventListener("keydown",r,!1)}return{open:v,close:b,closeAll:function(){var e=Array.prototype.slice.call(document.querySelectorAll("["+f+"]")),t=Array.prototype.slice.call(document.querySelectorAll(".rvt-dropdown__menu"));e.forEach(function(e){e.setAttribute("aria-expanded","false")}),t.forEach(function(e){e.setAttribute("aria-hidden","true")})},init:function(e){void 0===e&&(e=document),n(e),e.addEventListener("click",t,!1),e.addEventListener("keydown",r,!1)},destroy:n,toggle:function(e,t){if(!e)throw new Error("You must provide a unique id for the menu you're trying to toggle.");"true"===document.querySelector("["+f+'="'+e+'"]').getAttribute("aria-expanded")?b(e,t):v(e,t)}}}(),Modal=function(){"use strict";var s,f,v={tab:9,escape:27},n="[data-modal-trigger]",a="data-modal-trigger",i="data-modal-close",u="[data-modal-close]",b=".rvt-modal, .modal",m='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="-1"]';function o(e){var t={};return t.trigger=document.querySelector("["+a+'="'+e+'"]'),t.body=document.getElementById(e),t}function d(e,t){if("object"==typeof e&&1===e.nodeType&&!(e=e.getAttribute("id")))throw new Error("Please proved an id attribute for the modal you want to open.");var r=o(e);if(!r.body)throw new Error("Could not find a modal with the id of "+e+" to open.");f=r.body,s=r.trigger,r.body.setAttribute("aria-hidden","false"),document.body.classList.add("rvt-modal-open"),fireCustomEvent(f,"id","modalOpen"),t&&"function"==typeof t&&t()}function g(e,t){if("object"==typeof e&&1===e.nodeType&&!(e=e.getAttribute("id")))throw new Error("Please proved an id attribute for the modal you want to close.");var r=o(e);if(!r.body)throw new Error("Could not find a modal with the id of "+e+" to close.");r.body.setAttribute("aria-hidden","true"),document.body.classList.remove("rvt-modal-open"),fireCustomEvent(f,"id","modalClose"),t&&"function"==typeof t&&t()}function t(e){null!==e.target.closest(".rvt-modal__inner, .modal__inner")?e.clickedInModal=!0:e.clickedInModal=!1,e.clickedInModal&&e.stopPropagation();var t=n+", "+u+", "+b,r=e.target.closest(t);if(r){var o=r.getAttribute(a)||!(!r.getAttribute(i)||"close"===r.getAttribute(i))&&r.getAttribute(i)||e.target.closest(b);switch(null!==r){case r.hasAttribute(a):d(o),f.focus();break;case r.hasAttribute(i):e.preventDefault(),g(o),null!==s&&s.focus();break;case r===o&&!e.clickedInModal:if(r.hasAttribute("data-modal-dialog"))return;g(o),s.focus();break;default:return}}}function r(e){var t,r,o,n,a,i,u=e.target.closest(b);if(u)switch(e.keyCode){case v.tab:var d=Array.prototype.slice.call(u.querySelectorAll(m)),l=d[0],c=d[d.length-1];e.shiftKey?(n=l,a=c,i=e,document.activeElement===n&&(i.preventDefault(),a.focus())):(t=l,r=c,o=e,document.activeElement===r&&(o.preventDefault(),t.focus()));break;case v.escape:if(f.hasAttribute("data-modal-dialog"))return;g(f.id),null!==s&&s.focus()}}function l(e){void 0===e&&(e=document),e.removeEventListener("click",t,!1),e.removeEventListener("keydown",r,!1)}return{init:function(e){void 0===e&&(e=document),l(e),e.addEventListener("click",t,!1),e.addEventListener("keydown",r,!1)},destroy:l,open:d,close:g,focusTrigger:function(e){var t=document.querySelector('[data-modal-trigger="'+e+'"');if(!t)throw new Error("Could not find a modal trigger with the id of "+e);(s=t).focus()},focusModal:function(e){var t=document.getElementById(e);if(!t)throw new Error("Could not find a modal with the id of "+e);(f=t).focus()}}}(),Tabs=function(){var u="https://rivet.uits.iu.edu/components/page-content/tabs/#javascript-api",a={end:35,home:36,left:37,up:38,right:39,down:40},d="[data-tab], .rvt-tabs__tab[aria-controls]";function l(e){return Array.prototype.slice.call(e)}function r(e,t){var r='[data-tab="'+e+'"], [aria-controls="'+e+'"]',o=document.querySelector(r);if(o){var n=l(o.parentNode.querySelectorAll(d)),a=n.map(function(e){var t=e.getAttribute("data-tab")||e.getAttribute("aria-controls");return document.getElementById(t)});n.forEach(function(e){var t,r;e===o?((r=e).setAttribute("aria-selected","true"),r.removeAttribute("tabindex")):((t=e).setAttribute("aria-selected","false"),t.setAttribute("tabindex","-1"))}),a.forEach(function(e){var t=o.getAttribute("data-tab")||o.getAttribute("aria-controls");e.id===t?e.removeAttribute("hidden"):e.setAttribute("hidden","hidden")});var i=o.hasAttribute("data-tab")?"data-tab":"aria-controls";fireCustomEvent(o,i,"tabActivated"),t&&"function"==typeof t&&t()}else console.warn("There were no tabs found with the id of "+e+".\nPlease see the Rivet Tabs JavaScript API documentation for more info: \n"+u)}function t(e){var t=e.target.closest(d);t&&r(t.getAttribute("data-tab")||t.getAttribute("aria-controls"))}function o(e){var t=e.target.closest(d);if(t){var r=l(t.parentNode.querySelectorAll(d)),o=r.indexOf(t)+1,n=r.indexOf(t)-1;switch(e.keyCode){case a.right||a.down:case a.down:r[o]?r[o].focus():r[0].focus();break;case a.left:case a.up:r[n]?r[n].focus():r[r.length-1].focus();break;case a.end:r[r.length-1].focus();break;case a.home:r[0].focus();break;default:return}}}function n(e){void 0===e&&(e=document),e.removeEventListener("click",t,!1),e.removeEventListener("keydown",o,!1)}return{init:function(e){void 0===e&&(e=document),n(e),e.addEventListener("click",t,!1),e.addEventListener("keydown",o,!1)},destroy:n,activateTab:r}}(),FileInput=function(){"use strict";var u="No file selected",d="data-upload";function l(e){var t,r,o=document.createElement("span"),n=(t=e.files[0].name,(r=document.createElement("div")).textContent=t,r.innerHTML);return o.textContent=n,o}function t(e){var t=e.target.closest("["+d+"]");if(t){var r,o,n=t.getAttribute(d),a=document.getElementById(n),i=t.querySelector("[data-file-preview]");0<a.files.length?(i.innerHTML="",1<a.files.length?i.appendChild((r=a,(o=document.createElement("span")).textContent=r.files.length+" files selected",o)):i.appendChild(l(a)),fireCustomEvent(t,d,"fileAttached")):i.innerHTML=u}}function r(e){void 0===e&&(e=document),e.removeEventListener("change",t,!1)}return{init:function(e){void 0===e&&(e=document),r(e),e.addEventListener("change",t,!1)},destroy:r}}();Alert.init(),Drawer.init(),Dropdown.init(),Modal.init(),Tabs.init(),FileInput.init();